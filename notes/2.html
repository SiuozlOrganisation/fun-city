<!DOCTYPE html>
<html>
<head>
	<title>Siuozl Notes</title>
	<style type="text/css">
		html, body {
			margin:0;
			padding:0;
			width:100%;
			height:100%;
			overflow:hidden;
		}
		#textBox {
			width:100%;
			height:100%;
			border:none;
			outline:none;
			font-family:serif;
			font-size:16px;
			padding:50px;
			box-sizing:border-box;
		}
	</style>
	<div>
        <p id="userName"></p>
        <script>
            var userName = localStorage.getItem("Siuozl_ProfileNAME");
            window.onload = function(username) {
                document.getElementById("userName").innerText = (userName)
            }
        </script>
		<style>
			#userName {
				float: right;
				font-family: fantasy;
				font-size: x-small;
			}
		</style>
    </div>
</head>
<body>
	<a href="1.html">Previous page</a> <a href="3.html">Next page</a>
	<textarea id="textBox"></textarea>
	<script type="text/javascript">
		var input = document.getElementById("textBox");
		window.onload = function() {
		  input.focus();
		  input.value = localStorage.getItem('savedTextPG2');
		};

		function saveToStorage() {
		  console.log('saving')
		  localStorage.setItem('savedTextPG2', input.value);
		}

		input.addEventListener('keyup', saveToStorage);
		input.addEventListener('onchange', saveToStorage);
		input.addEventListener('keydown', function(e) {
		  if (e.which === 9) {
		    var start = this.selectionStart;
		    var end = this.selectionEnd;

		    const tabString = '    ';

		    input.value = input.value.substring(0, start)
				+ tabString
				+ input.value.substring(end);

		    this.selectionStart = this.selectionEnd = start + tabString.length;
		    e.preventDefault();
		  }
		})

		window.addEventListener('storage', function(e) {
		  input.value = localStorage.getItem('savedTextPG2');
		});

	</script>
</body>
</html>